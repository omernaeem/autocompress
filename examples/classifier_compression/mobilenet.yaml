version: 1
pruners:
  layer1_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.146755469898129
    weights: ['module.model.1.3.weight']
  layer2_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.1664998544758241
    weights: ['module.model.2.3.weight']
  layer3_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.21652656782085614
    weights: ['module.model.3.3.weight']
  layer4_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.167437491043649
    weights: ['module.model.4.3.weight']
  layer5_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.1801881726657646
    weights: ['module.model.5.3.weight']
  layer6_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.018968498412821624
    weights: ['module.model.6.3.weight']
  layer7_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.13504696151160975
    weights: ['module.model.7.3.weight']
  layer8_pruner:
    class: 'L1RankedStructureParameterPruner'
    group_type: Filters
    desired_sparsity: 0.13729819934952694
    weights: ['module.model.8.3.weight']

lr_schedulers:
  pruning_lr:
    class: ExponentialLR
    gamma: 0.95
extensions:
  net_thinner:
    class: FilterRemover
    thinning_func_str: remove_filters
    arch: 'mobilenet'
    dataset: 'imagenet'
policies:
  - pruner:
      instance_name : 'layer1_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer2_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer3_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer4_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer5_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer6_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer7_pruner'
    epochs: [0]
  - pruner:
      instance_name : 'layer8_pruner'
    epochs: [0]

  - lr_scheduler:
      instance_name: pruning_lr
    starting_epoch: 0
    ending_epoch: 500
    frequency: 1
  - extension:
      instance_name : net_thinner
    epochs: [0]
